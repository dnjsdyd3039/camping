<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.camily.dao.BoardDao">

	<select id="selectBoardList" resultType="com.camily.dto.BoardDto">
		SELECT BOCODE, BOMID, BOTYPE, BOTITLE, BOCONTENTS, TO_CHAR(BODATE,
		'YYYY-MM-DD')AS BODATE, BOSTATE
		FROM BOARDS
		WHERE BOSTATE = 1
		ORDER BY BOCODE
	</select>

	<select id="selectBoardView" resultType="com.camily.dto.BoardDto">
		SELECT BOCODE, BOMID, BOTYPE, BOTITLE, BOCONTENTS, TO_CHAR(BODATE,
		'YYYY-MM-DD')AS BODATE, BOSTATE
		FROM BOARDS
		WHERE BOCODE = #{bocode}
	</select>

	<select id="selectReplyList" resultType="com.camily.dto.ReplyDto">
		SELECT RPCODE, RPMID, RPBOCODE, TO_CHAR(RPDATE, 'YYYY-MM-DD HH24:MI')AS
		RPDATE, RPCONTENTS
		FROM REPLYS
		WHERE RPBOCODE = #{bocode}
	</select>

	<insert id="insertBoard">
		INSERT INTO BOARDS (BOCODE, BOMID, BOTITLE,
		BOCONTENTS,BOTYPE,BODATE,BOSTATE)
		VALUES (#{bocode}, #{bomid},
		#{botitle}, #{bocontents},1,SYSDATE,1)
	</insert>

	<select id="getMaxBocode" resultType="int">
		SELECT NVL(MAX(BOCODE),0)
		FROM BOARDS
	</select>
	
	<delete id="deleteBoard">
		DELETE FROM BOARDS WHERE BOCODE = #{bocode}
	</delete>
	
	<update id="">
		UPDATE BOARDS 
		SET BOTITLE = #{botitle}, BOCONTENTS = #{bocontents}
		WHERE BOCODE = #{bocode}
	</update>
</mapper>